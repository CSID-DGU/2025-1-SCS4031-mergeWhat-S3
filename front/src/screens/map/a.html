// @ts-nocheck
// eslint-disable-next-line @typescript-eslint/ban-ts-comment

const htmlContent = `
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Kakao Map Indoor</title>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=7fe9c6b0107267e90bf2f78c90050d42&libraries=services,drawing"></script>
    <style>
      html,body {
        margin: 0;
        padding: 0;
        height: 100%;
      }
      #map {
        width: 100%;
        height: 100%;
      }
        /* ì£¼ì°¨ì¥ ë§ˆì»¤ìš© ì¸í¬ìœˆë„ìš° ìŠ¤íƒ€ì¼ (ê¸°ì¡´ kakaoHTMLì— ì—†ì—ˆì§€ë§Œ ì¶”ê°€) */
      .parking-infowindow {
        padding:5px;
        font-size:12px;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      /* ê¸°ì¡´ ì‹œì¥ í´ë¦¬ê³¤ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ (ì´ì „ ë‹µë³€ì—ì„œ ì„ì˜ ì¶”ê°€í–ˆë˜ ìŠ¤íƒ€ì¼) */
      .info-bubble { 
          background-color: white;
          border: 1px solid #ccc;
          border-radius: 5px;
          padding: 5px 10px;
          font-size: 14px;
          font-weight: bold;
          white-space: nowrap;
          text-align: center;
          pointer-events: none; /* ì˜¤ë²„ë ˆì´ ì•„ë˜ ì§€ë„ë¥¼ í´ë¦­í•  ìˆ˜ ìˆë„ë¡ */
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      const map = new kakao.maps.Map(document.getElementById("map"), {
        center: new kakao.maps.LatLng(37.570344507734944, 127.00174887659568),
        level: 3,
      });

      window.currentMapMode = 'market'
      

      // ğŸ“Œ ì‹œì¥ ê²€ìƒ‰ê²°ê³¼ -> ë²„íŠ¼ì‹œíŠ¸ì— ìˆëŠ” ì‹œì¥ëª… í´ë¦­í•˜ë©´ ì‹œì¥ ì¤‘ì‹¬ìœ„ì¹˜ë¡œ í™”ë©´ ì´ë™
      document.addEventListener("message", function (event) {
        const message = JSON.parse(event.data);
        if (message.type === "moveCenter" && message.lat && message.lng) {
          const newCenter = new kakao.maps.LatLng(message.lat, message.lng);
          map.setCenter(newCenter);
        }
        if (message.zoomLevel !== undefined) {
          map.setLevel(message.zoomLevel);
        }
      });

      // ğŸ“Œ ë©”ì¸ í´ë¦¬ê³¤, ì‹¤ë‚´ í´ë¦¬ê³¤ ìœ„ì¹˜ì¢Œí‘œ

      const mainPolygons = [
        {
          name: "ê´‘ì¥ì‹œì¥", // ğŸ“Œ ê´‘ì¥ì‹œì¥
          path: [
            new kakao.maps.LatLng(37.570668867836574, 126.99837563184579),
            new kakao.maps.LatLng(37.57035802039376, 126.9981039683968),
            new kakao.maps.LatLng(37.56975885724193, 126.99803040682878),
            new kakao.maps.LatLng(37.56915519127822, 126.9980926794776),
            new kakao.maps.LatLng(37.56959669428107, 127.00022072979066),
            new kakao.maps.LatLng(37.569763370637986, 127.0013753194526),
            new kakao.maps.LatLng(37.569830943923755, 127.00148851581403),
            new kakao.maps.LatLng(37.56988049459539, 127.00178282430431),
            new kakao.maps.LatLng(37.570344507734944, 127.00174887659568),
            new kakao.maps.LatLng(37.570858075895885, 127.0016922902675),
            new kakao.maps.LatLng(37.5707995224628, 127.00045278633918),
            new kakao.maps.LatLng(37.5706598570911, 126.99831903385477),
          ],
          indoor: [
            {
              name: "a",
              path: [
                new kakao.maps.LatLng(37.569405217076785, 126.99806437448336),
                new kakao.maps.LatLng(37.569247543091684, 126.99807852784318),
                new kakao.maps.LatLng(37.5691957374624, 126.99818040391585),
                new kakao.maps.LatLng(37.56922727472191, 126.99834453474644),
                new kakao.maps.LatLng(37.569432250189685, 126.99827378363759),
              ],
            },

            {
              name: "ê´‘ì¥ìˆœë³µìŒêµíšŒ",
              path: [
                // ê´‘ì¥ìˆœë³µìŒêµíšŒ
                new kakao.maps.LatLng(37.569405217076785, 126.99806437448336),
                new kakao.maps.LatLng(37.569247543091684, 126.99807852784318),
                new kakao.maps.LatLng(37.5691957374624, 126.99818040391585),
                new kakao.maps.LatLng(37.56922727472191, 126.99834453474644),
                new kakao.maps.LatLng(37.569432250189685, 126.99827378363759),
              ],
            },
            {
              name: "ì•„í”¼ì•„ìƒê°€, êµ¬ì œì²œêµ­",
              path: [
                // ì•„í”¼ì•„ìƒê°€, êµ¬ì œì²œêµ­
                new kakao.maps.LatLng(37.56972506953239, 126.99800776872678),
                new kakao.maps.LatLng(37.569425489196114, 126.99804739478296),
                new kakao.maps.LatLng(37.569461532872396, 126.99829642187375),
                new kakao.maps.LatLng(37.569752102701486, 126.99821434888102),
              ],
            },
            {
              name: "íŒŒì¸í”ŒëŸ¬ìŠ¤, ë°”ë‹¤ê·¹ì¥",
              path: [
                // íŒŒì¸í”ŒëŸ¬ìŠ¤, ë°”ë‹¤ê·¹ì¥
                new kakao.maps.LatLng(37.569463786124764, 126.99835018924),
                new kakao.maps.LatLng(37.56923628572396, 126.99842094064482),
                new kakao.maps.LatLng(37.569290349568746, 126.998766182121),
                new kakao.maps.LatLng(37.56944577114643, 126.99875203024024),
                new kakao.maps.LatLng(37.56944576857154, 126.99852847103165),
                new kakao.maps.LatLng(37.56946604028789, 126.99847470321365),
              ],
            },
            {
              name: "ë™ì–‘ë¹Œë”©, ì˜ì‹ ìƒê°€",
              path: [
                // ë™ì–‘ë¹Œë”©, ì˜ì‹ ìƒê°€
                new kakao.maps.LatLng(37.569477303519584, 126.99853696000501),
                new kakao.maps.LatLng(37.56948406348508, 126.9987548594662),
                new kakao.maps.LatLng(37.569727332383245, 126.99876617491275),
                new kakao.maps.LatLng(37.56982193681678, 126.99875768371926),
                new kakao.maps.LatLng(37.56978364180492, 126.99852280463209),
                new kakao.maps.LatLng(37.56961020038914, 126.99853978727518),
              ],
            },

            {
              name: "ê¸°í›ˆìƒì‚¬, ì˜ˆì§€ë¹Œë”©",
              path: [
                // ê¸°í›ˆìƒì‚¬, ì˜ˆì§€ë¹Œë”©
                new kakao.maps.LatLng(37.56979039909291, 126.99850865511642),
                new kakao.maps.LatLng(37.569758861502365, 126.99830490472753),
                new kakao.maps.LatLng(37.56974084138922, 126.9982907557631),
                new kakao.maps.LatLng(37.56960343994625, 126.99831622772724),
                new kakao.maps.LatLng(37.56948856365862, 126.99836150815355),
                new kakao.maps.LatLng(37.56948856560922, 126.99850866113454),
                new kakao.maps.LatLng(37.569598937448994, 126.9985001693263),
              ],
            },
            {
              name: "ë¹„ì™€ì´ìƒê°€, ë°€ë¼ë…¸",
              path: [
                // ë¹„ì™€ì´ìƒê°€, ë°€ë¼ë…¸
                new kakao.maps.LatLng(37.569846714601745, 126.99879730160771),
                new kakao.maps.LatLng(37.56929485506774, 126.99881711948511),
                new kakao.maps.LatLng(37.569393968768495, 126.99936045131435),
                new kakao.maps.LatLng(37.56984221351058, 126.99927272125124),
              ],
            },
            {
              name: "b",
              path: [
                new kakao.maps.LatLng(37.56985122465456, 126.99950194134165),
                new kakao.maps.LatLng(37.56959444101853, 126.99951892226566),
                new kakao.maps.LatLng(37.5694660495681, 126.99963211765817),
                new kakao.maps.LatLng(37.56941424150212, 126.99942553797179),
                new kakao.maps.LatLng(37.56943676620505, 126.99938874957901),
                new kakao.maps.LatLng(37.56985122394204, 126.99935478764712),
              ],
            },
            {
              name: "ìƒ¤ë„¬ì˜ìƒì‹¤",
              path: [
                // ìƒ¤ë„¬ì˜ìƒì‹¤
                new kakao.maps.LatLng(37.56985798308954, 126.99986133592918),
                new kakao.maps.LatLng(37.56985347719038, 126.99951326084194),
                new kakao.maps.LatLng(37.569727337907274, 126.99953307078115),
                new kakao.maps.LatLng(37.569716076284784, 126.9998443569505),
              ],
            },
            {
              name: "êµ­ë¯¼ì€í–‰",
              path: [
                //kbêµ­ë¯¼ì€í–‰
                new kakao.maps.LatLng(37.56969355062163, 126.99954439048318),
                new kakao.maps.LatLng(37.56960570371924, 126.99958683906004),
                new kakao.maps.LatLng(37.569463797203994, 126.99967456563047),
                new kakao.maps.LatLng(37.56950208986229, 126.99984718726131),
                new kakao.maps.LatLng(37.569693551394415, 126.99984152712459),
              ],
            },

            {
              name: "ë©”ê°€ì»¤í”¼",
              path: [
                // ë©”ê°€ì»¤í”¼
                new kakao.maps.LatLng(37.569860235587804, 126.99986982556226),
                new kakao.maps.LatLng(37.569589936955644, 126.99987548577039),
                new kakao.maps.LatLng(37.56952686730253, 126.99990944427299),
                new kakao.maps.LatLng(37.56958092684941, 127.00022638948114),
                new kakao.maps.LatLng(37.56959894672527, 127.00024336875087),
                new kakao.maps.LatLng(37.56983095312197, 127.00020941097007),
                new kakao.maps.LatLng(37.56985347805048, 127.0001839421237),
              ],
            },
            {
              name: "ëŒ€ì„±ë¹Œë”©",
              path: [
                // ëŒ€ì„±ë¹Œë”©
                new kakao.maps.LatLng(37.569950331576216, 127.00092537157438),
                new kakao.maps.LatLng(37.5698286969672, 127.00095366884842),
                new kakao.maps.LatLng(37.56986923963105, 127.0011885493574),
                new kakao.maps.LatLng(37.56988725895644, 127.00124514724581),
                new kakao.maps.LatLng(37.569970601870686, 127.00116308201878),
              ],
            },
            {
              name: "ì •ë¦¼ì»¤í…",
              path: [
                //ì •ë¦¼ì»¤í…
                new kakao.maps.LatLng(37.569815182035505, 127.00095366867612),
                new kakao.maps.LatLng(37.56971156732621, 127.00098196608957),
                new kakao.maps.LatLng(37.56977012887556, 127.00130740256073),
                new kakao.maps.LatLng(37.56979941097485, 127.0013300420868),
                new kakao.maps.LatLng(37.569880501188806, 127.00127344593179),
                new kakao.maps.LatLng(37.56983770529246, 127.00113761104816),
              ],
            },

            {
              name: "ê°œë¯¸ìƒíšŒ",
              path: [
                //ê°œë¯¸ìƒíšŒ
                new kakao.maps.LatLng(37.56989402187734, 127.00051220834516),
                new kakao.maps.LatLng(37.56987600263898, 127.00032260628332),
                new kakao.maps.LatLng(37.569853477812686, 127.00029996715558),
                new kakao.maps.LatLng(37.56962822883258, 127.00034241430677),
                new kakao.maps.LatLng(37.569605703842264, 127.00037637263709),
                new kakao.maps.LatLng(37.5696304805149, 127.00055465459629),
                new kakao.maps.LatLng(37.569891769413175, 127.00050654856919),
              ],
            },
            {
              name: "ìƒ‰ë™ì €ê³ ë¦¬",
              path: [
                // ìƒ‰ë™ì €ê³ ë¦¬
                new kakao.maps.LatLng(37.56990077922985, 127.00053767731698),
                new kakao.maps.LatLng(37.569700307555294, 127.00057729409833),
                new kakao.maps.LatLng(37.56972057927868, 127.00070180870189),
                new kakao.maps.LatLng(37.56991204102411, 127.00066502204483),
              ],
            },

            {
              name: "ìƒˆë§ˆì„ê¸ˆê³ ",
              path: [
                // ìƒˆë§ˆì„ê¸ˆê³ 
                new kakao.maps.LatLng(37.56991429333324, 127.00069615075724),
                new kakao.maps.LatLng(37.569783648892816, 127.0007131287984),
                new kakao.maps.LatLng(37.56979491059793, 127.00082632397017),
                new kakao.maps.LatLng(37.56992555511227, 127.00080085647953),
              ],
            },

            {
              name: "ë‹´ì•„ê¹€ë°¥",
              path: [
                // ë‹´ì•„ê¹€ë°¥
                new kakao.maps.LatLng(37.56993231236272, 127.00083198525176),
                new kakao.maps.LatLng(37.569806172900726, 127.00084613323386),
                new kakao.maps.LatLng(37.569772385867914, 127.0008036847153),
                new kakao.maps.LatLng(37.56974760845423, 127.00080934419869),
                new kakao.maps.LatLng(37.56968679260944, 127.00058012386654),
                new kakao.maps.LatLng(37.56964399526845, 127.0005914430182),
                new kakao.maps.LatLng(37.56969805273969, 127.00093951781797),
                new kakao.maps.LatLng(37.569936817054014, 127.00087160364959),
              ],
            },
            {
              name: "ìš°ë¦¬ì€í–‰, ìˆ˜ì…êµ¬ì œ ìƒê°€",
              path: [
                //ìš°ë¦¬ì€í–‰, ìˆ˜ì…êµ¬ì œ ìƒê°€
                new kakao.maps.LatLng(37.57045713219646, 126.9982539506726),
                new kakao.maps.LatLng(37.570364778310086, 126.99813226720721),
                new kakao.maps.LatLng(37.57033775043684, 126.99826244315095),
                new kakao.maps.LatLng(37.570335508371215, 126.99925290717522),
                new kakao.maps.LatLng(37.570430112811856, 126.9992415866277),
                new kakao.maps.LatLng(37.57042334561318, 126.99830488966829),
              ],
            },
            {
              name: "ìˆ˜ì…êµ¬ì œ ìƒê°€ ìœ„ ì‚¼ê°í˜•",
              path: [
                // ìˆ˜ì…êµ¬ì œ ìƒê°€ ìœ„ ì‚¼ê°í˜•
                new kakao.maps.LatLng(37.57045713632109, 126.99855958005233),
                new kakao.maps.LatLng(37.57046839476356, 126.99826244011595),
                new kakao.maps.LatLng(37.57065310068943, 126.99839544155175),
                new kakao.maps.LatLng(37.57053597167808, 126.99842374311099),
                new kakao.maps.LatLng(37.57054273073994, 126.99854825878433),
              ],
            },
            {
              name: "ì›ì œì¸ì‚¼",
              path: [
                // ì›ì œì¸ì‚¼
                new kakao.maps.LatLng(37.570653100956996, 126.99841525091531),
                new kakao.maps.LatLng(37.57055849682427, 126.99844355197479),
                new kakao.maps.LatLng(37.57054948830905, 126.99855674836864),
                new kakao.maps.LatLng(37.57046389402625, 126.99857938923563),
                new kakao.maps.LatLng(37.570463895947334, 126.99874918335087),
                new kakao.maps.LatLng(37.57067788194299, 126.99871239094206),
              ],
            },
            {
              name: "ìŠ¹ìš°ë„¤ì‹ë‹¹",
              path: [
                // ìŠ¹ìš°ë„¤ì‹ë‹¹
                new kakao.maps.LatLng(37.57067562985022, 126.99874917980996),
                new kakao.maps.LatLng(37.57050444085722, 126.99876050228664),
                new kakao.maps.LatLng(37.57044812882516, 126.99877748262779),
                new kakao.maps.LatLng(37.57043686731339, 126.9988708695415),
                new kakao.maps.LatLng(37.57068464070026, 126.99883690687773),
              ],
            },
            {
              name: "c",
              path: [
                new kakao.maps.LatLng(37.570695903471346, 126.99887086563098),
                new kakao.maps.LatLng(37.57044362509844, 126.99890482825333),
                new kakao.maps.LatLng(37.57044137518049, 126.99923026690922),
                new kakao.maps.LatLng(37.57070491618401, 126.99921045481975),
              ],
            },
            {
              name: "ìƒˆë§ˆì„ìƒê°€",
              path: [
                //ìƒˆë§ˆì„ìƒê°€
                new kakao.maps.LatLng(37.570274678276554, 126.99810114061475),
                new kakao.maps.LatLng(37.57007645892412, 126.9980785065489),
                new kakao.maps.LatLng(37.56989625866738, 126.99800776416708),
                new kakao.maps.LatLng(37.5697836348052, 126.99804172568106),
                new kakao.maps.LatLng(37.56979940448781, 126.99818321910719),
                new kakao.maps.LatLng(37.570067450496865, 126.99817472293564),
                new kakao.maps.LatLng(37.57017331911114, 126.99828508609822),
                new kakao.maps.LatLng(37.57029270079298, 126.99827093388382),
              ],
            },
            {
              name: "60ë…„ì „í†µë–¡ì§‘",
              path: [
                // 60ë…„ì „í†µë–¡ì§‘
                new kakao.maps.LatLng(37.570247651516596, 126.99830489365009),
                new kakao.maps.LatLng(37.570150794512394, 126.99830489584518),
                new kakao.maps.LatLng(37.57005844106292, 126.99820868179447),
                new kakao.maps.LatLng(37.570071963993485, 126.99885106584051),
                new kakao.maps.LatLng(37.570274687818156, 126.99883691325266),
              ],
            },
            {
              name: "ì¢…ë¡œì°½ê³ ",
              path: [
                // ì¢…ë¡œì°½ê³ 
                new kakao.maps.LatLng(37.57004042093917, 126.99819453279655),
                new kakao.maps.LatLng(37.56981517246856, 126.99822000713009),
                new kakao.maps.LatLng(37.569846711200746, 126.99850016435792),
                new kakao.maps.LatLng(37.56988951225414, 126.99883408936199),
                new kakao.maps.LatLng(37.5700516915692, 126.9988482362656),
              ],
            },
            {
              name: "ì‹ ì´Œê½ƒê²Œì¥",
              path: [
                // ì‹ ì´Œê½ƒê²Œì¥
                new kakao.maps.LatLng(37.570272435550585, 126.9988595524451),
                new kakao.maps.LatLng(37.570089984119754, 126.99887370466591),
                new kakao.maps.LatLng(37.56990077505466, 126.99887087763445),
                new kakao.maps.LatLng(37.569916545528336, 126.99925574124121),
                new kakao.maps.LatLng(37.57027018613454, 126.99924158824932),
              ],
            },

            {
              name: "ì‚¬ê°í˜•1-1",
              path: [
                // ì‚¬ê°í˜•1
                new kakao.maps.LatLng(37.5702566717986, 126.99934063467917),
                new kakao.maps.LatLng(37.57019134972683, 126.9993576146047),
                new kakao.maps.LatLng(37.5701845939927, 126.99993774239023),
                new kakao.maps.LatLng(37.57027469352955, 126.99993491242046),
              ],
            },
            {
              name: "ì‚¬ê°í˜•1-2 ê°ˆë¦­ë³´ì´",
              path: [
                // ì‚¬ê°í˜•2 ê°ˆë¦­ë³´ì´
                new kakao.maps.LatLng(37.57016206740727, 126.99936327463719),
                new kakao.maps.LatLng(37.57008097782125, 126.9993632753275),
                new kakao.maps.LatLng(37.57006070712209, 126.99993208272002),
                new kakao.maps.LatLng(37.570157564126156, 126.99992925274175),
              ],
            },
            {
              name: "ì‚¬ê°í˜•1-3 ë‚¨ê°•ì‹¤í¬",
              path: [
                // ì‚¬ê°í˜•3 ë‚¨ê°•ì‹¤í¬
                new kakao.maps.LatLng(37.57003818053929, 126.99936327569182),
                new kakao.maps.LatLng(37.5699435760354, 126.9993661063794),
                new kakao.maps.LatLng(37.56994132521811, 126.99991510353551),
                new kakao.maps.LatLng(37.570031424758135, 126.9999122735477),
              ],
            },
            {
              name: "ì‚¬ê°í˜•2-1",
              path: [
                // ì‚¬ê°í˜•1
                new kakao.maps.LatLng(37.57027694603591, 126.99999717010517),
                new kakao.maps.LatLng(37.5703062275389, 127.00044712356102),
                new kakao.maps.LatLng(37.57023414786528, 127.00045844270305),
                new kakao.maps.LatLng(37.57019360396272, 126.99999151032493),
              ],
            },

            {
              name: "ì‚¬ê°í˜•2-2 í‰ì°½ì¹¼êµ­ìˆ˜",
              path: [
                // ì‚¬ê°í˜•2 í‰ì°½ì¹¼êµ­ìˆ˜
                new kakao.maps.LatLng(37.570180088152995, 127.00045561248051),
                new kakao.maps.LatLng(37.57015080585648, 127.00044146285177),
                new kakao.maps.LatLng(37.57013503841573, 127.00044712253766),
                new kakao.maps.LatLng(37.57011251336233, 127.00048957073241),
                new kakao.maps.LatLng(37.57007196958338, 127.00001414943547),
                new kakao.maps.LatLng(37.57015531165882, 127.00000282989026),
              ],
            },

            {
              name: "ì‚¬ê°í˜•2-3 ì˜ˆë³¸í•œë³µ",
              path: [
                //ì‚¬ê°í˜•3 ì˜ˆë³¸í•œë³µ
                new kakao.maps.LatLng(37.570033677279135, 127.00000565977129),
                new kakao.maps.LatLng(37.56994808271422, 127.00000565976482),
                new kakao.maps.LatLng(37.5699480824693, 127.00024054000447),
                new kakao.maps.LatLng(37.569990878910225, 127.0005065492404),
                new kakao.maps.LatLng(37.570080978523194, 127.000489570526),
                new kakao.maps.LatLng(37.570031424789065, 127.00001980919892),
              ],
            },
            {
              name: "ì‚¬ê°í˜•3-1",
              path: [
                //ì‚¬ê°í˜•1
                new kakao.maps.LatLng(37.5703062272373, 127.00052070085587),
                new kakao.maps.LatLng(37.57024766261149, 127.00050372108574),
                new kakao.maps.LatLng(37.570265680819425, 127.00080934980461),
                new kakao.maps.LatLng(37.57031974061893, 127.00079803080371),
              ],
            },

            {
              name: "ì‚¬ê°í˜•3-2 í™”ê°œì¥í„°",
              path: [
                // ì‚¬ê°í˜•2 í™”ê°œì¥í„°
                new kakao.maps.LatLng(37.5701868453493, 127.00052070002478),
                new kakao.maps.LatLng(37.57015305786741, 127.00055465847147),
                new kakao.maps.LatLng(37.570139542869136, 127.0005688078195),
                new kakao.maps.LatLng(37.57012602797876, 127.00056031804932),
                new kakao.maps.LatLng(37.57015080366991, 127.00084330724243),
                new kakao.maps.LatLng(37.57020936852988, 127.00082066876442),
              ],
            },
            {
              name: "ì‚¬ê°í˜•3-3",
              path: [
                // ì‚¬ê°í˜•3
                new kakao.maps.LatLng(37.5701012504816, 127.00058578685751),
                new kakao.maps.LatLng(37.57008323060144, 127.00058012694134),
                new kakao.maps.LatLng(37.5700787256931, 127.00056597746965),
                new kakao.maps.LatLng(37.5700111509824, 127.0005772964975),
                new kakao.maps.LatLng(37.57004493644144, 127.00088009456772),
                new kakao.maps.LatLng(37.57011926862544, 127.00087160577571),
              ],
            },
            {
              name: "ì‚¼ê°í˜• ì „ë¼ë„íšŸì§‘",
              path: [
                // ì‚¼ê°í˜• ì „ë¼ë„íšŸì§‘
                new kakao.maps.LatLng(37.57028820558621, 127.00082632942),
                new kakao.maps.LatLng(37.57004944120414, 127.00090839348313),
                new kakao.maps.LatLng(37.57006070257338, 127.00103856840654),
              ],
            },
            {
              name: "ë†í˜‘ì€í–‰",
              path: [
                // ë†í˜‘ì€í–‰
                new kakao.maps.LatLng(37.570693654107565, 126.99926705315093),
                new kakao.maps.LatLng(37.5705337275416, 126.9992840341455),
                new kakao.maps.LatLng(37.57056301108079, 126.9995189160359),
                new kakao.maps.LatLng(37.57070041280892, 126.99950476559776),
              ],
            },
            {
              name: "í™”ì°½ë¹Œë”©",
              path: [
                // í™”ì°½ë¹Œë”©
                new kakao.maps.LatLng(37.570517960174364, 126.99929252400833),
                new kakao.maps.LatLng(37.570430113212055, 126.99930667434246),
                new kakao.maps.LatLng(37.57043236675611, 126.9995189168762),
                new kakao.maps.LatLng(37.57053372870921, 126.99951325641511),
              ],
            },
            {
              name: "í•©ë™ë¹Œë”©",
              path: [
                // í•©ë™ë¹Œë”©
                new kakao.maps.LatLng(37.57041659824836, 126.9993010146675),
                new kakao.maps.LatLng(37.570299468933975, 126.9993151652406),
                new kakao.maps.LatLng(37.57030397484655, 126.9995019383268),
                new kakao.maps.LatLng(37.57040533687227, 126.99951325725065),
              ],
            },
            {
              name: "d",
              path: [
                new kakao.maps.LatLng(37.57068915049398, 126.99953589468721),
                new kakao.maps.LatLng(37.570565263670176, 126.9995443851732),
                new kakao.maps.LatLng(37.570470659170404, 126.99954721565169),
                new kakao.maps.LatLng(37.57041434690584, 126.99953306649235),
                new kakao.maps.LatLng(37.570321994858666, 126.99952740727578),
                new kakao.maps.LatLng(37.57032875297017, 126.99973398970008),
                new kakao.maps.LatLng(37.57056301187023, 126.99978775707467),
                new kakao.maps.LatLng(37.57069365615474, 126.99976794732964),
              ],
            },
            {
              name: "ë¶€ì´Œìœ¡íšŒ",
              path: [
                //ë¶€ì´Œìœ¡íšŒ
                new kakao.maps.LatLng(37.570707171126756, 126.99979058657672),
                new kakao.maps.LatLng(37.57058778927113, 126.999804736444),
                new kakao.maps.LatLng(37.57055174960955, 126.99995189161085),
                new kakao.maps.LatLng(37.5706959088601, 126.99994906160741),
              ],
            },
            {
              name: "e",
              path: [
                new kakao.maps.LatLng(37.570558506922865, 126.99980473652046),
                new kakao.maps.LatLng(37.57031073312314, 126.99976228872539),
                new kakao.maps.LatLng(37.570326500778044, 126.99997170103278),
                new kakao.maps.LatLng(37.57052246725595, 126.99994057201312),
              ],
            },
            {
              name: "ì¢…ë¡œìš°ë¦¬ì•½êµ­",
              path: [
                // ì¢…ë¡œìš°ë¦¬ì•½êµ­
                new kakao.maps.LatLng(37.57076348344736, 127.0001301760098),
                new kakao.maps.LatLng(37.5707544735658, 126.99999151026127),
                new kakao.maps.LatLng(37.57055174961932, 127.00000282990526),
                new kakao.maps.LatLng(37.5705449920945, 127.00011885600956),
                new kakao.maps.LatLng(37.570749968497864, 127.00014715546274),
              ],
            },
            {
              name: "ì€ì„±íšŸì§‘",
              path: [
                // ì€ì„±íšŒì§‘
                new kakao.maps.LatLng(37.57052697224729, 127.00000848971293),
                new kakao.maps.LatLng(37.57033551073101, 127.00003112886772),
                new kakao.maps.LatLng(37.570342268038885, 127.00019526291506),
                new kakao.maps.LatLng(37.57051796224523, 127.00010753635075),
              ],
            },
            {
              name: "ì—´ë¦°ì•½êµ­",
              path: [
                //ì—´ë¦°ì•½êµ­
                new kakao.maps.LatLng(37.570754473452006, 127.0001641349491),
                new kakao.maps.LatLng(37.57054273957072, 127.00014998495993),
                new kakao.maps.LatLng(37.570590040683584, 127.00054051217855),
                new kakao.maps.LatLng(37.570763482891785, 127.00038486820286),
              ],
            },
            {
              name: "ì‹ ì„±ì£¼ë‹¨",
              path: [
                // ì‹ ì„±ì£¼ë‹¨
                new kakao.maps.LatLng(37.570529224135974, 127.00037637728427),
                new kakao.maps.LatLng(37.57037380237333, 127.00039618579174),
                new kakao.maps.LatLng(37.57035127795812, 127.0002150722222),
                new kakao.maps.LatLng(37.57049994227719, 127.00016130448726),
              ],
            },
            {
              name: "ê´‘ì¥ì‹œì¥ ì „ê³¨ëª©ìª½",
              path: [
                // ê´‘ì¥ì‹œì¥ ì „ê³¨ëª©ìª½
                new kakao.maps.LatLng(37.5705630107845, 127.00054900170024),
                new kakao.maps.LatLng(37.5704301131954, 127.0006961555582),
                new kakao.maps.LatLng(37.570394073381166, 127.00069615522274),
                new kakao.maps.LatLng(37.570378307271994, 127.00041882500508),
                new kakao.maps.LatLng(37.570517961590895, 127.00040750617123),
              ],
            },
            {
              name: "ëª¨ë…€ê¹€ë°¥",
              path: [
                //ëª¨ë…€ê¹€ë°¥
                new kakao.maps.LatLng(37.57031298197603, 127.00095650491942),
                new kakao.maps.LatLng(37.5701327812655, 127.00114044542553),
                new kakao.maps.LatLng(37.570202607018125, 127.0012762813079),
                new kakao.maps.LatLng(37.57031523302054, 127.0011206389334),
                new kakao.maps.LatLng(37.57032874867664, 127.0010414020253),
              ],
            },
            {
              name: "ì°¸ì‹ ìœ¡íšŒ",
              path: [
                //ì°¸ì‹ ìœ¡íšŒ
                new kakao.maps.LatLng(37.5703310004126, 127.00112346906653),
                new kakao.maps.LatLng(37.570218374096754, 127.0013074103959),
                new kakao.maps.LatLng(37.57023864575414, 127.00137249829838),
                new kakao.maps.LatLng(37.57024089760526, 127.00142626631592),
                new kakao.maps.LatLng(37.57034000733407, 127.00140645892519),
              ],
            },
            {
              name: "365ì¼ì¥",
              path: [
                //365ì¼ì¥
                new kakao.maps.LatLng(37.57022287769758, 127.00142626597228),
                new kakao.maps.LatLng(37.57020711084975, 127.00137815750413),
                new kakao.maps.LatLng(37.57019359643881, 127.00133287898802),
                new kakao.maps.LatLng(37.57012151834848, 127.00118855336623),
                new kakao.maps.LatLng(37.56997961034614, 127.00130457633877),
                new kakao.maps.LatLng(37.57005394071531, 127.00145456161495),
              ],
            },
            {
              name: "ì‘¥ìŠ¤ì´ˆì½”íŒŒì´ì„œìš¸ + cu",
              path: [
                // ì‘¥ìŠ¤ì´ˆì½”íŒŒì´ì„œìš¸ + cu
                new kakao.maps.LatLng(37.56993681255444, 127.00134985370396),
                new kakao.maps.LatLng(37.569878247055215, 127.00141776976132),
                new kakao.maps.LatLng(37.569792651935614, 127.00146304616328),
                new kakao.maps.LatLng(37.569839950517284, 127.00173471540658),
                new kakao.maps.LatLng(37.569900766648615, 127.00180546383243),
                new kakao.maps.LatLng(37.569909779272706, 127.00162152178787),
                new kakao.maps.LatLng(37.56999312327907, 127.001474369621),
              ],
            },
            {
              name: "í˜¸ë‚¨ì§‘",
              path: [
                // í˜¸ë‚¨ì§‘
                new kakao.maps.LatLng(37.570328743992484, 127.00148003603037),
                new kakao.maps.LatLng(37.57013953478388, 127.0014941817346),
                new kakao.maps.LatLng(37.570175570593506, 127.00178283133772),
                new kakao.maps.LatLng(37.570355770008774, 127.00176019645035),
              ],
            },
            {
              name: "ì¢…ë¡œë³¸ ì •í˜•ì™¸ê³¼ì˜ì›",
              path: [
                // ì¢…ë¡œë³¸ ì •í˜•ì™¸ê³¼ì˜ì›
                new kakao.maps.LatLng(37.57011475719429, 127.00151116057188),
                new kakao.maps.LatLng(37.569997628007116, 127.00149417889975),
                new kakao.maps.LatLng(37.56992554661488, 127.00162718189277),
                new kakao.maps.LatLng(37.569912029264096, 127.00179414458013),
                new kakao.maps.LatLng(37.57014854081702, 127.00177717091346),
              ],
            },
            {
              name: 17,
              path: [
                //ê°íƒ„ìˆ˜ì œëˆ„ë£½ì§€+ë°•ê°€ë„¤ë¹ˆëŒ€ë–¡
                new kakao.maps.LatLng(37.570795017408685, 127.00047259571308),
                new kakao.maps.LatLng(37.57035352705993, 127.00091971676724),
                new kakao.maps.LatLng(37.57081528736185, 127.0008942532084),
              ],
            },
            {
              name: "ì†Œìƒê³µì¸eì»¤ë¨¸ìŠ¤ + ìœ¡íšŒë¹ˆëŒ€ë–¡",
              path: [
                //ì†Œìƒê³µì¸Eì»¤ë¨¸ìŠ¤, ìœ¡íšŒë¹ˆëŒ€ë–¡
                new kakao.maps.LatLng(37.57052471611026, 127.00092820858494),
                new kakao.maps.LatLng(37.57036929443455, 127.0009253767578),
                new kakao.maps.LatLng(37.57038956608561, 127.0010159337801),
                new kakao.maps.LatLng(37.57041433812123, 127.00151399652466),
                new kakao.maps.LatLng(37.57054047761423, 127.00150267945871),
              ],
            },
            {
              name: "ìƒˆë™ì„œì•½êµ­",
              path: [
                // ìƒˆë™ì„œì•½êµ­
                new kakao.maps.LatLng(37.57054498240994, 127.00151682907415),
                new kakao.maps.LatLng(37.570421095404086, 127.00152814616295),
                new kakao.maps.LatLng(37.57043010229406, 127.00174887859707),
                new kakao.maps.LatLng(37.57054047430743, 127.00174322136819),
              ],
            },
            {
              name: "ì¢…ë¡œ 5ê°€ íŒŒì¶œì†Œ",
              path: [
                //ì¢…ë¡œ5ê°€íŒŒì¶œì†Œ
                new kakao.maps.LatLng(37.57078149404089, 127.00148853473125),
                new kakao.maps.LatLng(37.57079275365594, 127.00169794861823),
                new kakao.maps.LatLng(37.57056074695195, 127.00172624240716),
                new kakao.maps.LatLng(37.57055849730356, 127.00151965925373),
              ],
            },
            {
              name: "ì¢…ë¡œ5ê°€íŒŒì¶œì†Œ ìœ„",
              path: [
                //ì¢…ë¡œ5ê°€íŒŒì¶œì†Œ ìœ„.
                new kakao.maps.LatLng(37.570867088700396, 127.0014800466832),
                new kakao.maps.LatLng(37.5708715912673, 127.00166116148247),
                new kakao.maps.LatLng(37.570806268707166, 127.00168945918041),
                new kakao.maps.LatLng(37.570795008863, 127.00149702474357),
              ],
            },
            {
              name: "ì¢…ë¡œ5ê°€í•˜ì´ë·°ì˜¤í”¼ìŠ¤í…”",
              path: [
                //ì¢…ë¡œ5ê°€í•˜ì´ë·°ì˜¤í”¼ìŠ¤í…”
                new kakao.maps.LatLng(37.57081078212327, 127.00092821213508),
                new kakao.maps.LatLng(37.57054273592746, 127.00093952842818),
                new kakao.maps.LatLng(37.57056750765349, 127.00148853047254),
                new kakao.maps.LatLng(37.57084005912342, 127.00145740681913),
              ],
            },
          ],
        },
        {
          name: "ì¸í˜„ì‹œì¥", // ğŸ“Œ ì¸í˜„ì‹œì¥
          path: [
            new kakao.maps.LatLng(37.5623435979591, 126.99569618639049),
            new kakao.maps.LatLng(37.56313647146205, 126.99560276316363),
            new kakao.maps.LatLng(37.563927094326054, 126.99556310152893),
            new kakao.maps.LatLng(37.56420189788564, 126.99555459623598),
            new kakao.maps.LatLng(37.564219900716516, 126.99512165631253),
            new kakao.maps.LatLng(37.56365677315145, 126.99500567761176),
            new kakao.maps.LatLng(37.563145455635585, 126.99495760811922),
            new kakao.maps.LatLng(37.56260710876862, 126.99492368914596),
            new kakao.maps.LatLng(37.562395372621154, 126.99487842996506),
          ],
          indoor: [
            {
              name: "ì¸í˜„ì‹œì¥ indoor",
              path: [
                new kakao.maps.LatLng(37.5628909333489, 126.99517833527825),
                new kakao.maps.LatLng(37.56289542947373, 126.99496611381733),
                new kakao.maps.LatLng(37.563134193421334, 126.99496326812758),
                new kakao.maps.LatLng(37.56313870738211, 126.9951783193097),
              ],
            },
          ],
        },
        
      ];



      const highlightOption = {
        fillColor: "#EDF1FF",
        fillOpacity: 0.8,
      };

      const resetOption = {
        fillColor: "#B2C3F4",
        fillOpacity: 0.7,
      };

      const allMainPolygons = [];
      const allIndoorPolygons = [];

      mainPolygons.forEach(({ name, path, indoor }) => {
        const mainPolygon = new kakao.maps.Polygon({
          path,
          strokeWeight: 3,
          strokeColor: "#6182DF",
          fillColor: resetOption.fillColor,
          fillOpacity: resetOption.fillOpacity,
        });
        mainPolygon.setMap(map);
        allMainPolygons.push(mainPolygon);

        const indoorPolygons = indoor.map(({ name: indoorName, path }) => {
          const polygon = new kakao.maps.Polygon({
            path,
            strokeWeight: 1,
            strokeColor: "#6182DF",
            fillColor: resetOption.fillColor,
            fillOpacity: resetOption.fillOpacity,
          });



/*function initMap() {
  map = new kakao.maps.Map(...);

  if (window.ReactNativeWebView) {
    window.ReactNativeWebView.postMessage(JSON.stringify({
      type: 'mapReady'
    }));
  }
}*/

var parkingInfoWindow = new kakao.maps.InfoWindow({ zIndex: 1 });




          //âœ… indoor polygon í´ë¦­ ì´ë²¤íŠ¸
          kakao.maps.event.addListener(polygon, "click", () => {
            polygon.setOptions(highlightOption);
            setTimeout(() => polygon.setOptions(resetOption), 300);
            

            if (window.ReactNativeWebView) {
              if (name) {
                window.ReactNativeWebView.postMessage(
                  JSON.stringify({
                    type: "indoorClick",
                    name: indoorName,
                  })
                );
              } else {
                console.warn("âš ï¸ indoor polygon í´ë¦­ë¨ (name ì—†ìŒ)");
              }
            }
          });

          polygon.setMap(null);
          return polygon;
        });
        allIndoorPolygons.push({ name, polygons: indoorPolygons });
      });

      // ì¤Œ ì´ë²¤íŠ¸ ì²˜ë¦¬
      kakao.maps.event.addListener(map, "zoom_changed", function () {
        const level = map.getLevel();
        const showIndoor = level <= 1;

        allMainPolygons.forEach((polygon) =>
          polygon.setMap(showIndoor ? null : map)
        );
        allIndoorPolygons.forEach(({ polygons }) =>
          polygons.forEach((p) => p.setMap(showIndoor ? map : null))
        );
        updatePolygonVisibility();
      });

      function updatePolygonVisibility() {
        const level = map.getLevel();
        const showIndoor = level <= 1;

        allMainPolygons.forEach((polygon) =>
          polygon.setMap(showIndoor ? null : map)
        );
        allIndoorPolygons.forEach(({ polygons }) =>
          polygons.forEach((p) => p.setMap(showIndoor ? map : null))
        );
      }


// ë§ˆì»¤ ë„ìš°ê¸°
var markers = []; // ì§€ë„ì— í‘œì‹œë  ë§ˆì»¤ë“¤ì„ ë‹´ì„ ë°°ì—´

// ğŸš© ê¸°ì¡´ ë§ˆì»¤ë¥¼ ëª¨ë‘ ì œê±°í•˜ëŠ” í•¨ìˆ˜
function removeAllMarkers() {
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null); // ì§€ë„ì—ì„œ ë§ˆì»¤ ì œê±°
    }
    markers = []; // ë§ˆì»¤ ë°°ì—´ ì´ˆê¸°í™”
}

// ğŸš© ì—¬ëŸ¬ ë§ˆì»¤ë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ (MapHomeScreen.tsxì˜ 'addMultipleMarkers'ì™€ ë§¤ì¹­)
function addMultipleMarkers(locations) {
    
    removeAllMarkers(); // ìƒˆë¡œìš´ ë§ˆì»¤ë¥¼ ê·¸ë¦¬ê¸° ì „ì— ê¸°ì¡´ ë§ˆì»¤ ì œê±°

    if (locations && Array.isArray(locations)) {
        locations.forEach(locationData => {
            
            if (locationData.lat !== null && locationData.lat !== undefined && locationData.lng !== null && locationData.lng !== undefined) {
                var markerPosition = new kakao.maps.LatLng(locationData.lat, locationData.lng);

                var marker = new kakao.maps.Marker({
                    map: map, // ì „ì—­ 'map' ê°ì²´ ì‚¬ìš©
                    position: markerPosition,
                    // ì—¬ê¸°ì— ë§ˆì»¤ ì´ë¯¸ì§€ ì„¤ì • ë“± ì¶”ê°€ ê°€ëŠ¥ (ì˜ˆ: image ì†ì„± ì‚¬ìš©)
                });

                markers.push(marker);

                // ë§ˆì»¤ ì •ë³´ì°½ (InfoWindow)
                var storeName = locationData.name || 'ì´ë¦„ ì—†ìŒ';
                var infowindowContent = '<div style="padding:5px;font-size:12px;">' + storeName + '</div>';

                var infowindow = new kakao.maps.InfoWindow({
                    content: infowindowContent
                });

                // ë§ˆì»¤ í´ë¦­ ì‹œ ì •ë³´ì°½ ì—´ê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                kakao.maps.event.addListener(marker, 'click', function() {
                    
                    infowindow.open(map, marker);
                });
                
            } else {
                console.warn("ê²½ê³ : ìœ íš¨í•˜ì§€ ì•Šì€ ê°€ê²Œ ìœ„ì¹˜ ë°ì´í„° (ìœ„ë„ ë˜ëŠ” ê²½ë„ ì—†ìŒ):", locationData);
                alert("ê²½ê³ : ìœ íš¨í•˜ì§€ ì•Šì€ ê°€ê²Œ ìœ„ì¹˜ ë°ì´í„° (ìœ„ë„ ë˜ëŠ” ê²½ë„ ì—†ìŒ):" + JSON.stringify(locationData)); // ë””ë²„ê¹…ìš© alert
            }
        });

        if (markers.length > 0) {
    
        }
    } else {
        console.warn("ê²½ê³ : locationsê°€ ìœ íš¨í•œ ë°°ì—´ì´ ì•„ë‹ˆê±°ë‚˜ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.", locations);
        
    }
}

// ğŸš© ë‹¨ì¼ ë§ˆì»¤ë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ (MapHomeScreen.tsxì˜ 'addSingleMarker'ì™€ ë§¤ì¹­)
function addSingleMarker(locationData) {
  
    removeAllMarkers(); // ìƒˆë¡œìš´ ë§ˆì»¤ë¥¼ ê·¸ë¦¬ê¸° ì „ì— ê¸°ì¡´ ë§ˆì»¤ ì œê±°

    if (locationData.lat !== null && locationData.lat !== undefined && locationData.lng !== null && locationData.lng !== undefined) {
        var markerPosition = new kakao.maps.LatLng(locationData.lat, locationData.lng);

        var marker = new kakao.maps.Marker({
            map: map, // ì „ì—­ 'map' ê°ì²´ ì‚¬ìš©
            position: markerPosition,
            // ì—¬ê¸°ì— ë§ˆì»¤ ì´ë¯¸ì§€ ì„¤ì • ë“± ì¶”ê°€ ê°€ëŠ¥
        });

        markers.push(marker);

        // ë§ˆì»¤ ì •ë³´ì°½ (InfoWindow)
        var storeName = locationData.name || 'ì´ë¦„ ì—†ìŒ';
        var infowindowContent = '<div style="padding:5px;font-size:12px;">' + storeName + '</div>';

        var infowindow = new kakao.maps.InfoWindow({
            content: infowindowContent
        });

        // ë§ˆì»¤ í´ë¦­ ì‹œ ì •ë³´ì°½ ì—´ê¸° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        kakao.maps.event.addListener(marker, 'click', function() {
            
            infowindow.open(map, marker);
        });
        
    } else {
        console.warn("ê²½ê³ : ìœ íš¨í•˜ì§€ ì•Šì€ ë‹¨ì¼ ê°€ê²Œ ìœ„ì¹˜ ë°ì´í„° (ìœ„ë„ ë˜ëŠ” ê²½ë„ ì—†ìŒ):", locationData);
        
    }
}


if (window.ReactNativeWebView) {
  document.addEventListener('message', function(event) {
    try {
      const message = JSON.parse(event.data);
      alert("ì›¹ë·°ì—ì„œ ë©”ì‹œì§€ ìˆ˜ì‹ :"+message.type+message);

      switch (message.type) {
        case 'moveCenter':
          var moveLatLon = new kakao.maps.LatLng(message.lat, message.lng);
          var zoomLevel = message.zoomLevel !== undefined ? message.zoomLevel : map.getLevel();
          map.setCenter(moveLatLon);
          map.setLevel(zoomLevel);
          break;

        case 'clearMarkers':
          removeAllMarkers();
          break;

        case 'addMultipleMarkers':
          addMultipleMarkers(message.locations);
          break;

        case 'addSingleMarker':
          addSingleMarker(message);
          break;

        case 'SET_MAP_MODE':
          window.currentMapMode = message.mode;
          alert('ğŸ“ ì£¼ì°¨ì¥ ëª¨ë“œ ì§„ì…');
          alert('Map mode set to: ' + window.currentMapMode);

          if (message.mode === 'parking') {
            if (!map) {
              alert("ğŸ›‘ map ê°ì²´ê°€ ì•„ì§ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
              return;
            }

            hideMarketElements();
            const bounds = map.getBounds();
            const sw = bounds.getSouthWest();
            const ne = bounds.getNorthEast();

            window.ReactNativeWebView.postMessage(JSON.stringify({
              type: 'requestParkingData',
              payload: {
                swLat: sw.getLat(),
                swLng: sw.getLng(),
                neLat: ne.getLat(),
                neLng: ne.getLng()
              }
            }));
          } else {
            showMarketElements();
          }
          break;

        case 'setParkingMarkers':
          if (window.currentMapMode === 'parking') {

          alert('âœ… setParkingMarkers ìˆ˜ì‹ ');

            removeAllParkingMarkers();
            currentParkingPlaces = message.payload;
            message.payload.forEach(function (p) {
           addParkingPlaceMarker(p); // ì´ í•¨ìˆ˜ê°€ ì •ì˜ë¼ ìˆì–´ì•¼ í•¨
           });
    alert('âœ… setParkingMarkers ìˆ˜ì‹ '); // ë””ë²„ê¹…ìš©
          
          }
          break;

        case 'MOVE_TO_PARKING_PLACE':
          if (window.currentMapMode === 'parking' && message.lat && message.lng) {
            const latLng = new kakao.maps.LatLng(message.lat, message.lng);
            map.panTo(latLng);

            const targetPlace = currentParkingPlaces.find(p =>
              parseFloat(p.LAT) === message.lat && parseFloat(p.LNG) === message.lng);

            if (targetPlace) {
              for (let i = 0; i < parkingDataMarkers.length; i++) {
                const marker = parkingDataMarkers[i];
                const pos = marker.getPosition();
                if (pos.getLat() === message.lat && pos.getLng() === message.lng) {
                  const content = '<div class="parking-infowindow">' +
                    targetPlace.PARKING_NAME + '<br>' + targetPlace.ADDR + '</div>';
                  parkingInfoWindow.setContent(content);
                  parkingInfoWindow.open(map, marker);
                  break;
                }
              }
            }
          }
          break;

        default:
          console.warn('ì•Œ ìˆ˜ ì—†ëŠ” ë©”ì‹œì§€ íƒ€ì…:', message.type);
          break;
      }

    } catch (e) {
      console.error("ì›¹ë·° ë©”ì‹œì§€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", e, event.data);
      alert("ì›¹ë·° ë©”ì‹œì§€ ì²˜ë¦¬ ì˜¤ë¥˜: " + e.message + ", ì›ë³¸ ë°ì´í„°: " + event.data);
    }
  });
} else {
  console.warn("window.ReactNativeWebViewê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
  alert("ê²½ê³ : window.ReactNativeWebViewê°€ ì •ì˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
}


        // ===============================================
        // parkingHTML.ts ê¸°ëŠ¥ì— í•„ìš”í•œ ì¶”ê°€ ì „ì—­ ë³€ìˆ˜ ë° í•¨ìˆ˜ (ê¸°ì¡´ ì½”ë“œ ì•„ë˜ì— ì¶”ê°€)
        // ===============================================

        // ì›¹ë·°ì˜ í˜„ì¬ ì§€ë„ ëª¨ë“œë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜
        // 'market' (ê¸°ë³¸ê°’): ì‹œì¥ í´ë¦¬ê³¤ ë° ìƒì  ë§ˆì»¤ í‘œì‹œ
        // 'parking': ì£¼ì°¨ì¥ ë§ˆì»¤ í‘œì‹œ
        window.currentMapMode = 'market'; 

        // ì£¼ì°¨ì¥ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜ (ê¸°ì¡´ 'markers', 'infowindow'ì™€ëŠ” ë³„ê°œ)
        var parkingDataMarkers = []; 
        var parkingInfoWindow = new kakao.maps.InfoWindow({zIndex:1}); 
        var currentParkingPlaces = []; 

        // ì‹œì¥ ê´€ë ¨ ìš”ì†Œë“¤ì„ ìˆ¨ê¸°ëŠ” í•¨ìˆ˜
        function hideMarketElements() {
            allMainPolygons.forEach(polygon => polygon.setMap(null)); // ëª¨ë“  ë©”ì¸ í´ë¦¬ê³¤ ìˆ¨ê¸°ê¸°
            allIndoorPolygons.forEach(({ polygons }) => polygons.forEach(p => p.setMap(null))); // ëª¨ë“  ì‹¤ë‚´ í´ë¦¬ê³¤ ìˆ¨ê¸°ê¸°
            removeAllMarkers(); // ê¸°ì¡´ ìƒì  ë§ˆì»¤ ì œê±° (ê¸°ì¡´ removeAllMarkers í•¨ìˆ˜ ì¬ì‚¬ìš©)
            infowindow.close(); // ê¸°ì¡´ ìƒì  ì¸í¬ìœˆë„ìš° ë‹«ê¸°
            // ì‚¬ìš©ìë‹˜ì˜ ê¸°ì¡´ ì½”ë“œì—ëŠ” customOverlay ë³€ìˆ˜ê°€ ì—†ìœ¼ë¯€ë¡œ, ì´ ë¶€ë¶„ì„ ê±´ë“œë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
            // mainPolygons, allIndoorPolygons ë³€ìˆ˜ëŠ” ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
        }

        // ì£¼ì°¨ì¥ ê´€ë ¨ ìš”ì†Œë“¤ì„ ìˆ¨ê¸°ê³  ì‹œì¥ ê´€ë ¨ ìš”ì†Œë“¤ì„ ë‹¤ì‹œ í‘œì‹œí•  ì¤€ë¹„ë¥¼ í•˜ëŠ” í•¨ìˆ˜
        function showMarketElements() {
            removeAllParkingMarkers(); // ëª¨ë“  ì£¼ì°¨ì¥ ë§ˆì»¤ ì œê±°
            parkingInfoWindow.close(); // ì£¼ì°¨ì¥ ì¸í¬ìœˆë„ìš° ë‹«ê¸°
            
            // ì‹œì¥ í´ë¦¬ê³¤ê³¼ ìƒì  ë§ˆì»¤ëŠ” ì´ í•¨ìˆ˜ì—ì„œ ì§ì ‘ ë‹¤ì‹œ ê·¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
            // React Native ì•±ì—ì„œ 'market' ëª¨ë“œë¡œ ì „í™˜ ì‹œ, 'DRAW_POLYGON'ê³¼ 'SET_MARKERS' ë©”ì‹œì§€ë¥¼
            // ë‹¤ì‹œ ì›¹ë·°ë¡œ ë³´ë‚´ì£¼ì–´ì•¼ ì‹œì¥/ìƒì  ì •ë³´ê°€ ì¬í‘œì‹œë©ë‹ˆë‹¤.
        }

        // ì£¼ì°¨ì¥ ë§ˆì»¤ ìƒì„± ë° ì •ë³´ ì°½ í‘œì‹œ í•¨ìˆ˜
        function addParkingPlaceMarker(place) {
            const imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_orange.png';
            const imageSize = new kakao.maps.Size(36, 37); 
            const imgOptions = {
                 spriteSize: new kakao.maps.Size(36, 37), 
                 spriteOrigin: new kakao.maps.Point(0, 0), 
                 offset: new kakao.maps.Point(12, 35) 
            };
            const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions);

            const marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(parseFloat(place.LAT), parseFloat(place.LNG)), 
                image: markerImage,
                map: map // ê¸°ì¡´ map ê°ì²´ ì‚¬ìš©
            });
            parkingDataMarkers.push(marker);

            kakao.maps.event.addListener(marker, 'click', function() {
                const content = '<div class="parking-infowindow">' + place.PARKING_NAME + '<br>' + place.ADDR + '</div>';
                parkingInfoWindow.setContent(content);
                parkingInfoWindow.open(map, marker);
                
                if (window.ReactNativeWebView) {
                    window.ReactNativeWebView.postMessage(JSON.stringify({
                        type: 'parkingMarkerClick',
                        parkingName: place.PARKING_NAME,
                        lat: parseFloat(place.LAT),
                        lng: parseFloat(place.LNG)
                    }));
                }
            });
        }

        // ëª¨ë“  ì£¼ì°¨ì¥ ë§ˆì»¤ ì œê±° í•¨ìˆ˜
        function removeAllParkingMarkers() {
            for (let i = 0; i < parkingDataMarkers.length; i++) {
                parkingDataMarkers[i].setMap(null);
            }
            parkingDataMarkers = [];
            parkingInfoWindow.close(); 
        }

        // ì§€ë„ ì´ë™ ë˜ëŠ” í™•ëŒ€/ì¶•ì†Œ ì‹œ ì£¼ì°¨ì¥ ë°ì´í„° ìš”ì²­ (idle ì´ë²¤íŠ¸)
        // ì´ ë¦¬ìŠ¤ë„ˆëŠ” map ê°ì²´ê°€ ìƒì„±ëœ í›„ì— í•œ ë²ˆë§Œ ì¶”ê°€ë©ë‹ˆë‹¤.
        kakao.maps.event.addListener(map, 'idle', function() {
            if (window.ReactNativeWebView && window.currentMapMode === 'parking') {
                const bounds = map.getBounds();
                const sw = bounds.getSouthWest();
                const ne = bounds.getNorthEast();

                window.ReactNativeWebView.postMessage(JSON.stringify({
                    type: 'requestParkingData',
                    payload: {
                        swLat: sw.getLat(),
                        swLng: sw.getLng(),
                        neLat: ne.getLat(),
                        neLng: ne.getLng()
                    }
                }));
            }
        });

        // ì›¹ë·° ë¡œë“œ ì‹œ ì´ˆê¸° ë©”ì‹œì§€ ì „ì†¡ (ê¸°ì¡´ onloadì™€ ë¶„ë¦¬í•˜ì—¬ ì¤‘ë³µ ë°©ì§€)
        // ì´ ë¶€ë¶„ì€ ê¸°ì¡´ document.addEventListener('message', ...) ì•ˆì—ì„œ ì²˜ë¦¬ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, 
        // ì•±ì—ì„œ "WEBVIEW_LOADED" ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ë•Œ ì´ˆê¸° ì…‹ì—…ì´ ì™„ë£Œëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.

        // ê¸°ì¡´ ì½”ë“œì˜ document.addEventListener('message', ...) ì— switch case ë¬¸ìœ¼ë¡œ 'SET_MAP_MODE' ë“±ì„ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ, 
        // ì—¬ê¸°ì„œ ë‹¤ì‹œ document.addEventListenerë¥¼ í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.
        // ë‹¤ë§Œ, ê¸°ì¡´ì— document.addEventListenerê°€ ë‘ ë²ˆ ìˆëŠ” êµ¬ì¡°ì˜€ìœ¼ë¯€ë¡œ, ì´ ë¶€ë¶„ì„ í†µí•©í–ˆìŠµë‹ˆë‹¤.
        // (ê°€ì¥ í•˜ë‹¨ì˜ if (window.ReactNativeWebView) { ... } ë¸”ë¡ì— ëª¨ë‘ í¬í•¨ì‹œì¼°ìŠµë‹ˆë‹¤.)
        
  </script>
  </body>
</html>
`;
export default htmlContent;
